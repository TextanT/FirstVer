<?xml version="1.0" encoding="UTF-8"?>
<!-- mybatis map 선언 표시 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
              "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="com.besideYou.textant.manager.dao.ManagerDao">	
	
<!-- 	select out.*  -->
<!-- 		from (select rownum rum, in.*  -->
<!-- 			  from (select * from comments) in  -->
<!-- 			  where articleNum = #{articleNum}  -->
<!-- 			  order by rum) out  -->
<!-- 		where rum between 1 and #{commentRow} -->
	
<!-- 		SELECT * from reportComment order by writeDate desc -->
	<select id="getReportCommentList" parameterType="HashMap" resultType="reportComment">
		select outTable.* 
		from (
		select rownum rum, inTable.* 
			  from (
			  	select * 
			  	from reportComment 
			  	order by writeDate desc
			  	) inTable  
			  order by rum
			  ) outTable 
		where rum between #{startPage} and #{endPage}
	</select>
	<select id="getBadCommentList" resultType="comment">
	select outTable.* 
		from (
		select rownum rum, inTable.* 
			  from (
			  	select * 
			  	from comments 
			  	where commentBad > 10 
			  	order by writeDate desc
			  	) inTable  
			  order by rum
			  ) outTable 
		where rum between #{startPage} and #{endPage}
	</select>
	<select id="getReportBookList" resultType="reportBook">
	select outTable.* 
		from (
		select rownum rum, inTable.* 
			  from (
			  	select * 
			  	from reportBook
			  	order by writeDate desc
			  	) inTable  
			  order by rum
			  ) outTable 
		where rum between #{startPage} and #{endPage}
	</select>
	<select id="getNoticeList" resultType="notice">
	select outTable.* 
		from (
		select rownum rum, inTable.* 
			  from (
			  	select * 
			  	from notice
			  	order by writeDate desc
			  	) inTable  
			  order by rum
			  ) outTable 
		where rum between #{startPage} and #{endPage}
	</select>
	<select id="getRecommendedBookList" resultType="recommendedBook">
	select outTable.* 
		from (
		select rownum rum, inTable.* 
			  from (
			  	select * 
			  	from recommendedBook
			  	order by writeDate desc
			  	) inTable  
			  order by rum
			  ) outTable 
		where rum between #{startPage} and #{endPage}
	</select>
	
	<select id="getTotalRecommendBookCount" resultType="Integer">
	SELECT COUNT(*) FROM recommendedBook
	</select>
	
	<select id="getUserName" parameterType="Integer" resultType="String">
	SELECT USERID FROM LOGIN WHERE USERNUM = #{userNum}
	</select>
	
	<select id="getBookName" parameterType="Integer" resultType="String">
	SELECT BOOKNAME FROM BOOKINFO WHERE BOOKARTICLENUM = #{bookArticleNum}
	</select>
</mapper>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
